\documentclass{article}
\usepackage[utf8]{inputenc}

\input defs.tex

\title{Computing market equilibria via convex optimization}
\author{AJ Friend \and Stephen Boyd}
\date{\today}

\begin{document}

\maketitle

\section{Introduction}

\section{Market definitions}
\subsection{Arrow-Debreu}

An Arrow-Debreu market has $m$ agents and $n$ goods where
agent $i$ has an initial amount $b_{ij} \in \reals_+$ of good $j$.
Agent $i$ achieves utility $u_i(x_i) \in \reals_+$ when he is is allocated a bundle of goods $x_i \in \mathbf{R}^m_{+}$. That is, he is allocated amount $x_{ij}$ of good $j$.
Generally, $u_i$ is a concave, increasing function.

Given prices $p \in \reals^n_{++}$ for each good, agent $i$ will sell his initial goods and buy a bundle of goods $x_i$ to maximize his utility. That is, agent $i$ solves the optimization problem
\[
\begin{array}{ll}
\mbox{maximize} & u_i(x_i) \\
\mbox{subject to} & p^T x_i \leq p^T b_i \\
& x_i \geq 0.
\end{array}
\]

The \emph{Arrow-Debreu market equilibrium problem} is to find prices $p$ and an allocation matrix $x \in \reals^{m \times n}$ (where $x_i^T$ is the $i$th row of $x$) such that the following are true:
\begin{itemize}
\item $x \geq 0$
\item $\sum_{i=1}^m x_{ij} \leq \sum_{i=1}^m b_{ij}$
\item each agent achieves his optimal utility for the given prices
\end{itemize}

The second constraint simply states that the final total amount of each good cannot exceed the initial total amount.

\subsection{Fisher}

A Fisher market has $m$ agents and $n$ goods where
agent $i$ has an initial amount of money $w_i \in \reals_+$.
The total amount of good $j$ available for purchase is given by $b_j$.
Agent $i$ achieves utility $u_i(x_i) \in \reals_+$ when he is is allocated a bundle of goods $x_i \in \mathbf{R}^m_{+}$. That is, he is allocated amount $x_{ij}$ of good $j$.
Generally, $u_i$ is a concave, increasing function.

Given prices $p \in \reals^n_{++}$ for each good, agent $i$ uses his initial money $w_i$ to buy a bundle of goods $x_i$ to maximize his utility. That is, agent $i$ solves the optimization problem
\[
\begin{array}{ll}
\mbox{maximize} & u_i(x_i) \\
\mbox{subject to} & p^T x_i \leq w_i \\
& x_i \geq 0.
\end{array}
\]

The \emph{Fisher market equilibrium problem} is to find prices $p$ and an allocation matrix $x \in \reals^{m \times n}$ (where $x_i^T$ is the $i$th row of $x$) such that the following are true:
\begin{itemize}
\item $x \geq 0$
\item $\sum_{i=1}^m x_{ij} \leq b_j$
\item each agent achieves his optimal utility for the given prices
\end{itemize}

The second constraint simply states that the final total amount of each good cannot exceed the initial available amount.

\subsection{Fisher is a special case of Arrow-Debreu}

\section{Existence of equilibria}
Cite original papers for arrow-debreu result.
fisher existence follows from being a special case.

Existence is one thing. We know consider the question of computability.

\section{Convex formulation, equilibrium, and optimality conditions}
\subsection{Fisher}
\subsection{Arrow-Debreu}
It can be shown that a market equilibrium always exists and can be found by solving the problem

\[
\begin{array}{ll}
\mbox{find} & x, p \\
\mbox{subject to} & u_i(x_i)^T x_i \geq  \nabla_j u_i(x_i) \sum_k b_{ik} \frac{p_k}{p_j}, \forall i,j\\
& \sum_i x_{ij} \leq \sum_i b_{ij}, \forall j\\
& x_{ij} \geq 0, p_j \geq 0.
\end{array}
\]


The above problem is not convex but can be easily transformed by a simple change of variables. Specifically, let $p_j = \exp(\phi_j)$.
Then the problem becomes

\[
\begin{array}{ll}
\mbox{find} & x, \phi \\
\mbox{subject to} &  u_i(x_i)^T x_i \geq  \nabla_j u_i(x_i) \sum_k b_{ik} e^{\phi_k - \phi_j}, \forall i,j\\
& \sum_i x_{ij} \leq \sum_i b_{ij}, \forall j\\
& x_{ij} \geq 0.
\end{array}
\]

This is a convex feasibility problem and can be solved in a variety of ways.
Throughout the remainder, we'll use the following formulation:

\[
\begin{array}{ll}
\mbox{find} & x, \phi \\
\mbox{subject to} & \log(u_i(x_i)^T x_i) + \phi_j \geq  \log(\nabla_j u_i(x_i)) +  \log(\sum_k b_{ik} e^{\phi_k}), \forall i,j\\
& \sum_i x_{ij} \leq \sum_i b_{ij}, \forall j\\
& x_{ij} \geq 0.
\end{array}
\]

Note that the first constraint need only be explicitly formed when $\nabla_j u_i(x_i) > 0$, and we only need to include terms in the sum in
$\log(\sum_k b_{ik} e^{\phi_k})$ when $b_{ik} > 0$. These ideas will be used later when we exploit sparsity to solve these problems efficiently.

\subsection{Alternative formulations}
any benefit to these? XXX: cite

\section{Utility functions}
\subsection{Definitions}
homothetic, homogeneous, log-concave

\subsection{Transformations}
We can transform any homothetic, etc function to a homogeneous function
through the transformation given by \cite{jain2005market}.
Is this transformation of any practical value?


\subsection{Arrow-Debreu}
what work, what are representable
\begin{itemize}
\item complicated CES functions, nested, etc..
\item rational powers represented through SOCP
\end{itemize}
\subsection{Fisher}
can we transform homothetic to homogeneous of degree 1? or is that transformation completely non-constructive?

\subsection{Models with production?}
should we include?

\section{Solution methods}

\subsection{CVXPY and SCS}
\subsection{Exploiting sparsity}
\subsection{Splitting}
\subsection{Cutting plane}
\subsection{Approximations?}
can i approximate the exponential cone to do an approximate prox evaluation
at each step, allowing for SOCP solvers that can't handle exponential cones?

\section{Huge, distributed models}

\newpage
\bibliographystyle{alpha}
\bibliography{bibliography.bib}
\end{document}






























